{% extends "base.html" %}

{% block title %}Centrality{% endblock %}

{% block content %}

<div class="container mt-5">

    <h2 class="mb-4">Centrality</h2>

    <a href="/" class="btn btn-secondary mb-3">Back to Home</a>

    <div class="card shadow p-4">

        <form action="/rankings" method="POST">
            <label class="form-label">How many top characters to show?</label>
            <input type="number" name="k" class="form-control" min="1" value="5">

            <button type="submit" class="btn btn-info w-100 mt-3">
                Show Top Rankings
            </button>
        </form>

        {% if rankings %}
            <div class="mt-4">

                <!-- Top Degree -->
                <h4>ðŸ”¹ Top Degree</h4>
                <ul>
                {% for n in rankings.degree %}
                    <li>{{ n.name }} â€” Degree: {{ n.degree }}</li>
                {% endfor %}
                </ul>

                <!-- Top Weighted Degree -->
                <h4 class="mt-4">ðŸ”¹ Top Weighted Degree</h4>
                <ul>
                {% for n in rankings.weighted %}
                    <li>{{ n.name }} â€” Weighted Degree: {{ n.weighted_degree }}</li>
                {% endfor %}
                </ul>

                <!-- Top Popularity -->
                <h4 class="mt-4">ðŸ”¹ Top Popularity (Avg Episode Score)</h4>
                <ul>
                {% for n in rankings.popularity %}
                    <li>{{ n.name }} â€” Avg Score: {{ "%.2f"|format(n.avg_popularity()) }}</li>
                {% endfor %}
                </ul>

                <!-- Top Effective Popularity -->
                <h4 class="mt-4">ðŸ”¹ Top Effective Popularity</h4>
                <ul>
                {% for n in rankings.effective %}
                    <li>{{ n.name }} â€” Effective Avg: {{ "%.2f"|format(n.avg_effective_popularity()) }}</li>
                {% endfor %}
                </ul>

            </div>
        {% endif %}
    </div>

</div>

{% endblock %}
