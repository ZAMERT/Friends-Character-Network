{% extends "base.html" %}

{% block title %}Search Result{% endblock %}

{% block content %}

<div class="container mt-5">
    <h2>Search Character</h2>

    <form method="post" class="row g-3 mb-4">
        <div class="col-md-10">
            <input
                type="text"
                name="name"
                class="form-control"
                placeholder="Enter character name"
            >
        </div>
        <div class="col-md-2">
            <button class="btn btn-primary w-100">Search</button>
        </div>
    </form>

    {% if result %}
        {% if result.Error %}
            <div class="alert alert-danger">{{ result.Error }}</div>
        {% else %}
            <div class="card p-4 shadow">
                <h3>{{ result.Character }}</h3>
                <h5 class="mt-3">Interaction Count: </h5>
                <ul>
                    <li>Degree: {{ result["Degree"] }}</li>
                    <li>Weighted Degree: {{ result["Weighted Degree"] }}</li>
                </ul>

                <h5 class="mt-3">Top Interaction Partners:</h5>
                <ul>
                {% for item in result["Top Interaction Partners"] %}
                    <li>{{ item.Name }} ({{ item.Weight }})</li>
                {% endfor %}
                </ul>

                <h5 class="mt-3">Popularity:</h5>
                <ul>
                    <li>Average Score: {{ result["Popularity"]["Average"] }}</li>
                    <li>Episodes Appeared: {{ result["Popularity"]["Num of Episodes"] }}</li>
                    <li>Effective Score: {{ result["Popularity"]["Effective Episode Average"] }}</li>
                </ul>
            </div>
        {% endif %}
    {% endif %}
</div>

{% endblock %}
