# The Network of Friends: Mapping Character Interactions and Popularity

## Project Overview

This project analyzes **character relationships** and **popularity patterns** in the TV shows **Friends** using a custom built graph systems.
Each character is represented as a node, and edges reflect the frequency of co-occurrence of characters.
We regard each scene in every episode, and every time two characters appear together, as an interaction  between them.
Using this network, the project explores relationship structures, centrality rankings, shortest paths, and how interaction patterns relate to episode scores. 
This project is developed as the final project for SI507 at the University of Michigan.

--------------------

## Highlights

- Custom Node and Graph implementations. 
- Scene-level character interaction network with weighted edges. 
- Graph analytics including degree centrality, weighted degree, and BFS shortest paths. 
- Integration of episode ratings as character popularity signals. 
- End-to-end pipeline: raw scripts → structured data → graph → analysis. 
- Interactive exploration via CLI and web UI. 

## Project Goals

- Build a graph that captures **who appears with whom** across the entire series.
- Analyze **relationship patterns**, **centrality**, and **network connectivity**.
- Link graph structure to **episode popularity**.
- Provide an interactive and analytical toolkit for exploring characters and their relationships.

--------------------

## Data Sources

This project uses several publicly available datasets from Kaggle. 

### 1. **FRIENDS TV Series -Screenplay Script(Text)**
- Source: Kaggle. 
- Contains full dialogue text with episode metadata.
- Used to determine co-occurrence of characters. 
- URLs: https://www.kaggle.com/datasets/blessondensil294/friends-tv-series-screenplay-script

### 2. **Friends Series Dataset (Ratings)**
- Source: Kaggle.
- Contains titles, summaries, and **episode ratings**. 
- Used to compute per-character popularity scores. 
- URLs: https://www.kaggle.com/datasets/rezaghari/friends-series-dataset?select=friends_episodes_v3.csv

### 3. **Friends Episode Data (viewers)**
- Source: Kaggle.
- Contains **US viewers number** for each episode. 
- Used to enhance popularity and interaction analysis. 
- URLs: https://www.kaggle.com/datasets/bcruise/friends-episode-data/data

**Note:**
Only some small sample scripts are included in this repository. Full datasets are publicly available on Kaggle.

--------------------

## Methods & Algorithms

### Interaction Definition
- Each episode is segmented into scenes. 
- Characters appearing in the same scene are counted as an interaction. 
- Repeated co-occurrences increase edge weights. 

### **1. Parsing and Graph Construction**
- Clean the scripts line by line. 
- Characters extracted per episode. 
- Co-occurrence pairs counted.

### **2. Custom Graph Implementation**
- Node class stores neighbors, degree, weighted degree, and popularity statistics.  
- Graph class manages nodes and edges, supports traversal and ranking. 
- Weighted edges. 
- BFS traversal for shortest paths.

--------------------

## Data Processing and Reproducibility

Raw scripts and CSV files are transformed through a preprocessing pipeline that: 
- Cleans and normalizes character names. 
- Filters group speakers, generic roles, and non-character tokens. 
- Standardizes episode names. 
- Extracts scene-level character sets, interaction counts and word counts. 

For efficiency, intermediate results are cached locally as JSON files. These files are not tracked in the repository and can be regenerated by running: 
``` bash
python JSONProcessing.py
```

## User Interactions

Users can interact with the program through a command-line interface or a web interface. 
The main interactions includes: 

### 1. Search Character
- Users input a character name. 
- The program will return the information for that character (node), including
    Number of Degree
    Number of Weighted Degree
    Top 5 Interaction Partners
    Popularity Statistics

### 2. Find shortest paths
- Users input two characters names. 
- The program will return the shortest path between them in the network. 

### 3. Centrality
- This includes the statistic value for top degree, top weighted degree, top episode score, and top effective episode score. 
- Users input an int for {k}
- The program will return the top_{k} statistic values. 

### 4. Season Filter
- Users input an int for a certain season. 
- The program will filter the graph into a sub-graph. 
- Then the user can use the above interaction commands again and get the result for a particular season. 
- Users can input "Season All" to reset the graph to the full graph for all 10 seasons. 

Note: In the web interface, users can also have a look at the visualization of the network, which is implemented with Networkx and matplotlib.

--------------------

## Dependencies

This project requires the following Python libraries: 
- pandas
- Flask
- networkx
- matplotlib

--------------------

## Usage

This project provides 2 ways for users to interact with the Friends Network:

### 1. Command-Line interface

To run this interface, navigate to the Friends/ directory, and run:
    python main.py

### 2. Web Interface 

To run this interface, navigate to the Friends/ directory, and run:
    python ./Friends_UI/app.py

Then open the web browser and visit: http://127.0.0.1:5000/